<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="latest.css">
    <link rel="stylesheet" href="homePage.css">
</head>

<body class="body">
    <nav class="Nav">
        <h2 onclick="navigateTo('homePage.html')">Manga</h2>
        <ul class="ul link-offset">
            <li onclick="navigateTo('homePage.html')">Home</li>
            <li onclick="navigateTo('Manga.html')">All Manga</li>
            <li onclick="navigateTo('latest.html')">Latest</li>
            <li onclick="navigateTo('Review.html')">Review</li>
        </ul>
        <button class="button1" onclick="logout()">Sign up</button>
    </nav>

    <div class="movie-container" id="results"></div>

    <script>
        async function fetchMangas() {
            try {
                const response = await fetch('https://mangaverse-api.p.rapidapi.com/manga/chapter?id=659524dd597f3b00281f06ff', {
                    method: 'GET',
                    headers: {
                        'x-rapidapi-host': 'mangaverse-api.p.rapidapi.com',
                        'x-rapidapi-key': 'b3b86f16f4mshe8bea0f6ce75db3p1b0a1fjsnfe579436c62d'
                    }
                });

                const data = await response.json();
                console.log('Fetched Data:', data);

                const mangaList = data.data || [];

                if (mangaList.length === 0) {
                    document.getElementById('results').innerHTML = 'No results found.';
                } else {
                    const resultsDiv = document.getElementById('results');
                    resultsDiv.innerHTML = '';

                    // Loop through the manga list and create a card for each one
                    mangaList.forEach(manga => {
                        const card = document.createElement('div');
                        card.className = 'movie-card';
                        card.innerHTML = `
                            <div class="content-card">
                                <div class="coverImage">
                                    <img src="${manga.thumb || 'https://via.placeholder.com/300x450?text=No+Image'}" alt="${manga.title}" />
                                </div>
                                <div class="content">
                                    <h1>${manga.title}</h1>
                                    <p><strong>Genres:</strong> ${manga.id}</p>
                                    <p><strong>Status:</strong> ${manga.manga || 'Unknown'}</p>
                                    <button class="primary-btn"><i class="fas fa-play"></i> VIEW MANGA</button>
                                </div>
                            </div>
                        `;
                        resultsDiv.appendChild(card);
                    });
                }
            } catch (error) {
                console.error('Error fetching manga:', error);
                document.getElementById('results').innerHTML = 'Error fetching data.';
            }
        }

        window.onload = fetchMangas;

    </script>

    <script src="homePage.js"></script>
</body>

</html>